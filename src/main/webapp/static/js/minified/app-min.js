var Pointer=Backbone.Model.extend({defaults:{text:"default text",cssClass:"pointerOff"},initialize:function(){this.on("change:cssClass",function(){})}}),Pointers=Backbone.Collection.extend({model:Pointer}),PointerView=Backbone.View.extend({tagName:"div",className:"leftPointer ",events:{click:"whenClicked"},initialize:function(a){this.vent=a.vent},whenClicked:function(a){this.vent.trigger("markActiveEvent",{modelView:this})},render:function(){this.$el.html('<span class="pointerText">'+this.model.get("text")+"</span>");this.$el.addClass(this.model.get("cssClass"));return this},markActive:function(){this.$el.parent().find(".leftPointer").removeClass("pointerOn").addClass("pointerOff");this.$el.removeClass("pointerOff").toggleClass("pointerOn")}}),PointersView=Backbone.View.extend({el:$("#leftPointers"),template:$("#pointersTemplate").html(),events:{"click .leftPointer":"whenClicked"},pointerViews:[],currentPointer:0,interval:null,initialize:function(a){this.vent=a.vent;_.bindAll(this,"renderPointer");_.bindAll(this,"pointerInterval");_.bindAll(this,"intervalMarker");this.collection=new Pointers([{id:0,cssClass:"pointerOn",text:"Dynamiczna strona"},{id:1,text:"System usprawniajÄ…cy"},{id:2,text:"Wsparcie"}]);_.bind(this.eventFunction,this);this.vent.bind("markActiveEvent",this.eventFunction);this.render();this.intervalMarker()},renderPointer:function(b){var a=new PointerView({model:b,vent:this.vent});this.pointerViews.push(a);a.render();this.$el.append(a.el)},render:function(){this.collection.each(this.renderPointer);return this},whenClicked:function(a){if(this.interval!=null){clearInterval(this.interval)}a.preventDefault()},eventFunction:function(a){a.modelView.markActive();this.currentPointer=a.modelView.model.get("id")},startIntervalMarker:function(b,a){b();return setInterval(b,a)},pointerInterval:function(){this.pointerViews[this.currentPointer++].markActive();if(this.currentPointer==this.collection.length){this.currentPointer=0}},intervalMarker:function(){this.interval=this.startIntervalMarker(this.pointerInterval,3000)}}),MyController=Backbone.Controller.extend({routes:{"say/:something":"say"},say:function(a){alert(a)}}),vent=_.extend({},Backbone.Events);$(function(){new PointersView({vent:vent});new MyController();Backbone.History.start()});